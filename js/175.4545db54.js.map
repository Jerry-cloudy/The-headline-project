{"version":3,"file":"js/175.4545db54.js","mappings":"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","sources":["webpack://toutiao-m/./src/views/search/search.vue","webpack://toutiao-m/./src/views/search/components/search-history.vue","webpack://toutiao-m/src/views/search/components/search-history.vue","webpack://toutiao-m/./src/views/search/components/search-history.vue?8ea9","webpack://toutiao-m/./src/views/search/components/search-history.vue?e2fe","webpack://toutiao-m/./src/views/search/components/search-suggestion.vue","webpack://toutiao-m/src/views/search/components/search-suggestion.vue","webpack://toutiao-m/./src/views/search/components/search-suggestion.vue?f1b1","webpack://toutiao-m/./src/views/search/components/search-suggestion.vue?9884","webpack://toutiao-m/./src/views/search/components/search-result.vue","webpack://toutiao-m/src/views/search/components/search-result.vue","webpack://toutiao-m/./src/views/search/components/search-result.vue?eb8a","webpack://toutiao-m/./src/views/search/components/search-result.vue?b3d2","webpack://toutiao-m/src/views/search/search.vue","webpack://toutiao-m/./src/views/search/search.vue?aa84","webpack://toutiao-m/./src/views/search/search.vue?e193"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-container\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"background\":\"#3296fa\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"focus\":function($event){_vm.isResultShow = false}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),(_vm.isResultShow)?_c('SearchResult',{attrs:{\"searchText\":_vm.searchText}}):(_vm.searchText.trim())?_c('SearchSuggestion',{attrs:{\"searchText\":_vm.searchText},on:{\"search\":_vm.onSearch}}):_c('SearchHistory',{attrs:{\"searchHistories\":_vm.searchHistories},on:{\"emptyHistories\":function($event){_vm.searchHistories=[]},\"searchWord\":_vm.onSearch}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"}},[(_vm.isDelBtnShow)?[_c('span',{on:{\"click\":function($event){return _vm.$emit('emptyHistories')}}},[_vm._v(\"全部删除\")]),_vm._v(\"    \"),_c('span',{on:{\"click\":function($event){_vm.isDelBtnShow = false}}},[_vm._v(\"完成\")])]:_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDelBtnShow = true}}})],2),_vm._l((_vm.searchHistories),function(val,index){return _c('van-cell',{key:index,attrs:{\"title\":val},on:{\"click\":function($event){return _vm.onSearchItemClick(val, index)}}},[(_vm.isDelBtnShow)?_c('van-icon',{attrs:{\"name\":\"close\"}}):_vm._e()],1)})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-history\">\n    <van-cell title=\"搜索历史\">\n      <!-- template 标签 可以用作外部html结构 包裹部分html内容的一个盒子，在渲染时 不会展示在页面上 -->\n       <template  v-if=\"isDelBtnShow\">\n            <span @click=\"$emit('emptyHistories')\">全部删除</span>\n            &nbsp;&nbsp;\n            <span @click=\"isDelBtnShow = false\">完成</span>\n       </template>\n       <van-icon v-else name=\"delete\" @click=\"isDelBtnShow = true\" />\n    </van-cell>\n    <van-cell\n        v-for=\"(val, index) in searchHistories\"\n        :key=\"index\"\n        :title=\"val\"\n        @click=\"onSearchItemClick(val, index)\"\n    >\n      <van-icon v-if=\"isDelBtnShow\" name=\"close\" />\n    </van-cell>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SearchHistory',\n  props: {\n    searchHistories: {\n      type: Array,\n      required: true,\n      default: () => []\n    }\n  },\n  data () {\n    return {\n      isDelBtnShow: false, // 控制删除按钮是否显示\n      searchHistoriesClone: this.searchHistories\n    }\n  },\n  methods: {\n    onSearchItemClick (val, index) {\n      if (this.isDelBtnShow) {\n        // 处于删除状态 点击后删除\n        this.searchHistoriesClone.splice(index, 1)\n      } else {\n        // 处于非删除状态，点击后搜索\n        this.$emit('searchWord', val)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=e77d1b22&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e77d1b22\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-suggestion\"},_vm._l((_vm.suggestionList),function(item,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search', item)}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.highLight(item))}})]},proxy:true}],null,true)})}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-suggestion\">\n    <van-cell\n      v-for=\"(item, index) in suggestionList\"\n      :key=\"index\"\n      icon=\"search\"\n      @click=\"$emit('search', item)\"\n    >\n    <template #title>\n      <span v-html=\"highLight(item)\"></span>\n    </template>\n    </van-cell>\n  </div>\n</template>\n\n<script>\nimport { getSearchSuggestionsAPI } from '../../../api/index.js'\nimport { debounce } from 'loadsh'\nexport default {\n  name: 'SearchSuggestion',\n  data () {\n    return {\n      suggestionList: []// 联想建议列表数据\n    }\n  },\n  props: {\n    searchText: {\n      type: String,\n      default: ''\n    }\n  },\n  watch: {\n    searchText: {\n      // 原生 防抖\n      // function myDebounce(callback, times) {\n      //   // 通过闭包延迟时间timer的什么周期\n      //   let timer = null //计时器\n      //   return function (val) {\n      //     const that = this\n      //     if (timer) {\n      //       return clearTimeout(timer)\n      //     }\n      //     timer = setTimeout(() => {\n      //       // 通过call来改变this指向\n      //       callback.call(that,val)\n      //     },200)\n      //   }\n      // },\n      // debounce 防抖\n      handler: debounce(function (newVal) {\n        this.loadSearchSuggestion(newVal)\n      }, 200),\n      immediate: true// 首次监听触发\n    }\n  },\n  methods: {\n    // 查询数据接口\n    async loadSearchSuggestion (newVal) {\n      try {\n        const { data: res } = await getSearchSuggestionsAPI(newVal)\n        // console.log(res)\n        if (res.data.options && res.data.options[0] == null) {\n          // 判断有误options 数组，如果没有 且 开头的数组第 0 项 是空\n          res.data.options[0] = this.searchText\n        }\n        // // 在赋值之前实现高亮文字\n        // const list = res.data.options.map(item => {\n        //   // 1.设置关键字的高亮文字样式\n        //   const highLightStr = `<span style=\"color:rgb(77, 150, 243)\">${newVal}</span>`\n        //   // 2，通过split 方法将目标文字剪切出来\n        //   // 3.通过join 方法 将有样式的文字 添加进来\n        //   return item.split(newVal).join(highLightStr)\n        // })\n        this.suggestionList = res.data.options\n        // console.log(this.suggestionList)\n      } catch (error) {\n        this.$toast('获取列表失败')\n      }\n    },\n    // 文字高亮显示的方法\n    highLight (text) {\n      const highlightStr = `<span style=\"color:rgb(77, 150, 243)\">${this.searchText}</span>`\n      // 方案一\n      // 正则表达式 // 中间的内容都会当作匹配字符来使用，而不是数据变量\n      // 如果需要根据数据变量动态的创建正则表达式，则手动 new RegExp\n      // RegExp 正则表达式构造函数\n      //    参数1：匹配模式字符串，它会根据这个字符串创建正则对象\n      //    参数2：匹配模式，要写到字符串中\n      // const reg = new RegExp(this.searchText, 'gi')\n      // return text.replace(reg, highlightStr)\n\n      // 方案二\n      return text.split(this.searchText).join(highlightStr)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggestion.vue?vue&type=template&id=e24a8580&scoped=true&\"\nimport script from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggestion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e24a8580\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-result\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\"},on:{\"load\":_vm.onLoad,\"update:error\":function($event){_vm.error=$event}},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.art_id,attrs:{\"title\":item.title}})}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-result\">\n        <van-list\n            v-model=\"loading\"\n            :finished=\"finished\"\n            finished-text=\"没有更多了\"\n            @load=\"onLoad\"\n            :error.sync=\"error\"\n            error-text=\"请求失败，点击重新加载\"\n        >\n            <van-cell\n                v-for=\"item in list\"\n                :key=\"item.art_id\"\n                :title=\"item.title\" />\n    </van-list>\n  </div>\n</template>\n\n<script>\nimport { getSearchResultAPI } from '../../../api/index.js'\nexport default {\n  name: 'SearchResult',\n  data () {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      page: 1,\n      perPage: 20,\n      error: false\n    }\n  },\n  props: {\n    searchText: {\n      type: String,\n      default: ''\n    }\n  },\n  methods: {\n    async onLoad () {\n      try {\n        // 1. 请求获取数据\n        const { data: res } = await getSearchResultAPI({\n          page: this.page, // 页码\n          per_page: this.perPage, // 每页大小\n          q: this.searchText // 搜索关键字\n        })\n        // console.log(res.data.results)\n        // 2. 将数据添加到列表中\n        this.list.push(...res.data.results)\n        // 3. 设置加载状态结束\n        this.loading = false\n        // 4. 判断数据是否加载完毕\n        if (res.data.results.length) {\n          this.page++ // 更新获取下一页数据的页码\n        } else {\n          this.finished = true // 没有数据了，将加载状态设置结束，不再 onLoad\n        }\n      } catch (error) {\n        // 加载失败了 loading 也要关闭\n        this.error = true\n        this.loading = false\n        this.$toast('加载失败，请稍后重试')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=49f892bc&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49f892bc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"search-container\">\n    <!-- 顶部搜索事件监听\n    Tips: 在 van-search 外层增加 form 标签，且 action 不为空，即可在 iOS 输入法中显示搜索按钮。\n    -->\n    <form action=\"/\">\n      <van-search\n        v-model=\"searchText\"\n        show-action\n        background=\"#3296fa\"\n        placeholder=\"请输入搜索关键词\"\n        @search=\"onSearch\"\n        @cancel=\"onCancel\"\n        @focus=\"isResultShow = false\"\n      />\n    </form>\n    <!-- 搜索结果 -->\n    <SearchResult\n        v-if=\"isResultShow\"\n        :searchText=\"searchText\"\n    ></SearchResult>\n\n    <!-- 联想搜索 -->\n    <SearchSuggestion\n        v-else-if=\"searchText.trim()\"\n        :searchText=\"searchText\"\n        @search=\"onSearch\"\n    ></SearchSuggestion>\n\n    <!-- 搜索历史 -->\n    <SearchHistory\n        v-else\n        :searchHistories=\"searchHistories\"\n        @emptyHistories=\"searchHistories=[]\"\n        @searchWord=\"onSearch\"\n    ></SearchHistory>\n  </div>\n</template>\n\n<script>\nimport SearchHistory from './components/search-history.vue'\nimport SearchSuggestion from './components/search-suggestion.vue'\nimport SearchResult from './components/search-result.vue'\nimport { setItem, getItem } from '../../utils/storage.js'\nexport default {\n  name: 'SearchPage',\n  components: {\n    SearchHistory,\n    SearchSuggestion,\n    SearchResult\n  },\n  data () {\n    return {\n      searchText: '',\n      isResultShow: false, // 控制搜索结果的展示\n      searchHistories: getItem('TOUTIAO_SEARCH_HISTORIES') || [] // 初始化搜索历史\n    }\n  },\n  watch: {\n    searchHistories: {\n      handler (value) {\n        setItem('TOUTIAO_SEARCH_HISTORIES', value)\n      },\n      deep: true\n    }\n  },\n  methods: {\n    onSearch (val) {\n      // 更新文本框内容\n      this.searchText = val\n      //  this.$toast(val)\n\n      // 储存搜索历史记录\n      /*\n        1.不能有重复\n        2.最新的 要排在前边\n      */\n      const index = this.searchHistories.indexOf(val)\n      if (index !== -1) {\n        this.searchHistories.splice(index, 1)\n      }\n      this.searchHistories.unshift(val)\n\n      // 展示搜索结果内容\n      this.isResultShow = true\n    },\n    onCancel () {\n      this.$toast('取消')\n      // 取消搜索的时候 返回前一个页面\n      this.$router.back()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.search-container {\n  padding-top: 106px;\n  .van-search__action {\n    color: white;\n  }\n\n  .van-search {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=25093c03&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=25093c03&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25093c03\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onSearch","onCancel","$event","isResultShow","model","value","searchText","callback","$$v","expression","trim","searchHistories","staticRenderFns","isDelBtnShow","$emit","_v","_l","val","index","key","onSearchItemClick","_e","name","props","type","required","default","data","searchHistoriesClone","methods","component","suggestionList","item","scopedSlots","_u","fn","domProps","_s","highLight","proxy","watch","handler","immediate","res","finished","error","onLoad","loading","list","art_id","title","page","perPage","per_page","q","components","SearchHistory","SearchSuggestion","SearchResult","setItem","deep"],"sourceRoot":""}